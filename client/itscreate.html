<head>
  <title>itscreate</title>
  <link href='//api.tiles.mapbox.com/mapbox.js/v1.5.2/mapbox.css' rel='stylesheet' />
  <!-- 3rd party scripts -->
  <script src='//api.tiles.mapbox.com/mapbox.js/v1.5.2/mapbox.js'></script> 
</head>

<body>
	<div class="container full-height inital-shift">
		{{> landing}}
		{{> map}}
		{{> chat}}
		{{> people}}
    </div>

    {{> locationIndicator}}
</body>

<!-- templates -->

<template name="landing">
	<div class="landing animated fadeInDown panel panel-default hundred-p-height">
		<div class="panel-body">
			{{#if currentUser}}
				<!-- <img src="http://graph.facebook.com/{{currentUser.services.facebook.id}}/picture">
				{{currentUser.services.facebook.name}}
				<button class="logout">Log out</button> -->
				<h1>ITSCREATE</h1>
				<h4>Spreading creativity and tracking the creators</h4>
				<h4>working ... </h4>
			{{else}}
				<h1>ITSCREATE</h1>
				<h4>Spreading creativity and tracking the creators</h4>
				<button type="button" class="login btn btn-default btn-lg">
					<span class="glyphicon glyphicon-user"></span> Jump in
				</button>
			{{/if}}
		</div>
	</div>
</template>

<template name="map">
	<div class="map panel panel-default eighty-p-height">
		<!-- <div class="panel-body">
			<div class="map-canvas"></div>
		</div> -->
		<div class="map-canvas"></div>
		<!-- <div class="panel-footer">Panel heading without title</div> -->
	</div>
</template>

<template name="chat">
	<div class="chat panel panel-default eighty-p-height">
		<!-- <div class="panel-heading">CHATS</div> -->
		<div class="panel-body messages-panel">
			{{> newMessageForm }}
			{{> listMessages }}
		</div>
		<!-- <div class="panel-footer">Hello there</div> -->
	</div>
</template>

<template name="newMessageForm">
	<form class="form-horizonal new-message-form" role="form">
		<div class="form-group">
			<textarea class="form-control message" rows="3" name="message" placeholder="share smth create"></textarea>
		</div>
		<div class="form-group">
			<button type="submit" class="btn btn-default send-message">Send</button>
		</div>
	</form>
</template>

<template name="listMessages">
	<ul class="list-group">
		{{#each messages}}
			{{> message}}	
		{{/each}}
	</ul>
</template>

<template name="message">
	<li class="animated bounce list-group-item message">
		<div class="row">
			<div class="col-md-2 text-center">
				{{#if sender.picture}}
					<img width="50" height="50" src="{{sender.picture}}">
				{{/if}}
			</div>
			<div class="col-md-10">
				<h4><small>{{ sender.name }} says</small></h4>
				<p>{{message}}</p>
			</div>
		</div>
		{{#if sender.location }}
			<div class="row">
				<div class="col-md-12 text-right meta">
					<button type="button" class="btn btn-default btn-xs">
						<span class="glyphicon glyphicon-map-marker"></span> {{sender.location.city}}, {{sender.location.country}}
					</button>
				</div>
			</div>
		{{/if}}
	</li>
</template>

<template name="people">
	<div class="people panel panel-default eighty-p-height">
		<div class="panel-heading">{{peopleCount}} people online</div>
		<div class="panel-body">
			<ul class="list-group">
				{{#each allPeople}}
					{{> person}}
				{{/each}}
			</ul>
		</div>
	</div>
</template>

<template name="person">
	<li class="list-group-item person">
		<div class="row">
			<div class="col-md-2 text-center">
				<img width="100" height="100" src="http://graph.facebook.com/{{services.facebook.id}}/picture?width=100&height=100">
			</div>
			<div class="col-md-10">
				<h3>{{services.facebook.name}}</h3>
				{{#if profile.location}}
					<button type="button" class="btn btn-default btn-lng">
						<span class="glyphicon glyphicon-map-marker"></span> {{profile.location.city}}, {{profile.location.country}}
					</button>
				{{/if}}
			</div>
		</div>
	</li>
</template>

<template name="locationIndicator">
	<div class="wheres-waldo {{#if currentLocation}}normal{{else}}hidden{{/if}}">
		{{#if currentLocation}}
			<button type="button" class="locate btn btn-default btn-lng">
				<span class="glyphicon glyphicon-map-marker"></span> {{currentLocation.city}}, {{currentLocation.country}}
			</button>
		{{else}}
			<button type="button" class="locate btn btn-default btn-lng">
				<span class="glyphicon glyphicon-map-marker"></span> Where are you, broski?
			</button>
		{{/if}}
	</div>
</template>
